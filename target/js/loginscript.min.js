angular.module("appLogin",["ngRoute","ngSanitize","ngStorage","ngAnimate","angular-loading-bar","ngTouch"]),angular.module("appLogin").config(function(e){"use strict";e.when("/",{templateUrl:"external/login.html",controller:"loginCtrl"}).when("/register",{templateUrl:"external/register.html",controller:"loginCtrl"}).when("/reset",{templateUrl:"external/reset.html",controller:"loginCtrl"}).when("/reset/:token",{templateUrl:"external/reset.html",controller:"loginCtrl"}).when("/login/:confirm",{templateUrl:"external/login.html",controller:"loginCtrl"}).otherwise({redirectTo:"/"})}),angular.module("appLogin").controller("loginCtrl",["$scope","$location","$window","$http","$httpParamSerializerJQLike","$localStorage","$routeParams","authService",function(e,r,t,n,o,l,a,i){"use strict";var s=a.confirm;e.makenew=a.token,e.authService=i.data,s&&(e.registered=!0),e.login=function(e,r){i.login(e,r)},e.register=function(e,r,t){i.register(e,r,t)},e.forgot=function(r){return n({method:"POST",url:"/api/forgot",data:o({email:r}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(r){r.success===!1?e.error=r.message:e.message=r.message})},e.newpass=function(r,t){return n({method:"POST",url:"/api/reset/"+t,data:o({password:r}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(r){r.success===!1?e.error=r.message:e.message=r.message})}}]);